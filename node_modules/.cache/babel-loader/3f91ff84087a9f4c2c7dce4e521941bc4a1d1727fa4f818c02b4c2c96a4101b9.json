{"ast":null,"code":"export const parseFString = template => {\n  // Core logic replicated from internals of pythons built in Formatter class.\n  // https://github.com/python/cpython/blob/135ec7cefbaffd516b77362ad2b2ad1025af462e/Objects/stringlib/unicode_format.h#L700-L706\n  const chars = template.split(\"\");\n  const nodes = [];\n  const nextBracket = (bracket, start) => {\n    for (let i = start; i < chars.length; i += 1) {\n      if (bracket.includes(chars[i])) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  let i = 0;\n  while (i < chars.length) {\n    if (chars[i] === \"{\" && i + 1 < chars.length && chars[i + 1] === \"{\") {\n      nodes.push({\n        type: \"literal\",\n        text: \"{\"\n      });\n      i += 2;\n    } else if (chars[i] === \"}\" && i + 1 < chars.length && chars[i + 1] === \"}\") {\n      nodes.push({\n        type: \"literal\",\n        text: \"}\"\n      });\n      i += 2;\n    } else if (chars[i] === \"{\") {\n      const j = nextBracket(\"}\", i);\n      if (j < 0) {\n        throw new Error(\"Unclosed '{' in template.\");\n      }\n      nodes.push({\n        type: \"variable\",\n        name: chars.slice(i + 1, j).join(\"\")\n      });\n      i = j + 1;\n    } else if (chars[i] === \"}\") {\n      throw new Error(\"Single '}' in template.\");\n    } else {\n      const next = nextBracket(\"{}\", i);\n      const text = (next < 0 ? chars.slice(i) : chars.slice(i, next)).join(\"\");\n      nodes.push({\n        type: \"literal\",\n        text\n      });\n      i = next < 0 ? chars.length : next;\n    }\n  }\n  return nodes;\n};\nexport const interpolateFString = (template, values) => parseFString(template).reduce((res, node) => {\n  if (node.type === \"variable\") {\n    if (node.name in values) {\n      return res + values[node.name];\n    }\n    throw new Error(\"Missing value for input \".concat(node.name));\n  }\n  return res + node.text;\n}, \"\");\nexport const DEFAULT_FORMATTER_MAPPING = {\n  \"f-string\": interpolateFString\n};\nexport const DEFAULT_PARSER_MAPPING = {\n  \"f-string\": parseFString\n};\nexport const renderTemplate = (template, templateFormat, inputValues) => DEFAULT_FORMATTER_MAPPING[templateFormat](template, inputValues);\nexport const parseTemplate = (template, templateFormat) => DEFAULT_PARSER_MAPPING[templateFormat](template);\nexport const checkValidTemplate = (template, templateFormat, inputVariables) => {\n  if (!(templateFormat in DEFAULT_FORMATTER_MAPPING)) {\n    const validFormats = Object.keys(DEFAULT_FORMATTER_MAPPING);\n    throw new Error(\"Invalid template format. Got `\".concat(templateFormat, \"`;\\n                         should be one of \").concat(validFormats));\n  }\n  try {\n    const dummyInputs = inputVariables.reduce((acc, v) => {\n      acc[v] = \"foo\";\n      return acc;\n    }, {});\n    if (Array.isArray(template)) {\n      template.forEach(message => {\n        if (message.type === \"text\") {\n          renderTemplate(message.text, templateFormat, dummyInputs);\n        } else if (message.type === \"image_url\") {\n          if (typeof message.image_url === \"string\") {\n            renderTemplate(message.image_url, templateFormat, dummyInputs);\n          } else {\n            const imageUrl = message.image_url.url;\n            renderTemplate(imageUrl, templateFormat, dummyInputs);\n          }\n        } else {\n          throw new Error(\"Invalid message template received. \".concat(JSON.stringify(message, null, 2)));\n        }\n      });\n    } else {\n      renderTemplate(template, templateFormat, dummyInputs);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  } catch (e) {\n    throw new Error(\"Invalid prompt schema: \".concat(e.message));\n  }\n};","map":{"version":3,"names":["parseFString","template","chars","split","nodes","nextBracket","bracket","start","i","length","includes","push","type","text","j","Error","name","slice","join","next","interpolateFString","values","reduce","res","node","concat","DEFAULT_FORMATTER_MAPPING","DEFAULT_PARSER_MAPPING","renderTemplate","templateFormat","inputValues","parseTemplate","checkValidTemplate","inputVariables","validFormats","Object","keys","dummyInputs","acc","v","Array","isArray","forEach","message","image_url","imageUrl","url","JSON","stringify","e"],"sources":["/Users/mandylin/Desktop/WebCrack React/webcrack/node_modules/@langchain/core/dist/prompts/template.js"],"sourcesContent":["export const parseFString = (template) => {\n    // Core logic replicated from internals of pythons built in Formatter class.\n    // https://github.com/python/cpython/blob/135ec7cefbaffd516b77362ad2b2ad1025af462e/Objects/stringlib/unicode_format.h#L700-L706\n    const chars = template.split(\"\");\n    const nodes = [];\n    const nextBracket = (bracket, start) => {\n        for (let i = start; i < chars.length; i += 1) {\n            if (bracket.includes(chars[i])) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    let i = 0;\n    while (i < chars.length) {\n        if (chars[i] === \"{\" && i + 1 < chars.length && chars[i + 1] === \"{\") {\n            nodes.push({ type: \"literal\", text: \"{\" });\n            i += 2;\n        }\n        else if (chars[i] === \"}\" &&\n            i + 1 < chars.length &&\n            chars[i + 1] === \"}\") {\n            nodes.push({ type: \"literal\", text: \"}\" });\n            i += 2;\n        }\n        else if (chars[i] === \"{\") {\n            const j = nextBracket(\"}\", i);\n            if (j < 0) {\n                throw new Error(\"Unclosed '{' in template.\");\n            }\n            nodes.push({\n                type: \"variable\",\n                name: chars.slice(i + 1, j).join(\"\"),\n            });\n            i = j + 1;\n        }\n        else if (chars[i] === \"}\") {\n            throw new Error(\"Single '}' in template.\");\n        }\n        else {\n            const next = nextBracket(\"{}\", i);\n            const text = (next < 0 ? chars.slice(i) : chars.slice(i, next)).join(\"\");\n            nodes.push({ type: \"literal\", text });\n            i = next < 0 ? chars.length : next;\n        }\n    }\n    return nodes;\n};\nexport const interpolateFString = (template, values) => parseFString(template).reduce((res, node) => {\n    if (node.type === \"variable\") {\n        if (node.name in values) {\n            return res + values[node.name];\n        }\n        throw new Error(`Missing value for input ${node.name}`);\n    }\n    return res + node.text;\n}, \"\");\nexport const DEFAULT_FORMATTER_MAPPING = {\n    \"f-string\": interpolateFString,\n};\nexport const DEFAULT_PARSER_MAPPING = {\n    \"f-string\": parseFString,\n};\nexport const renderTemplate = (template, templateFormat, inputValues) => DEFAULT_FORMATTER_MAPPING[templateFormat](template, inputValues);\nexport const parseTemplate = (template, templateFormat) => DEFAULT_PARSER_MAPPING[templateFormat](template);\nexport const checkValidTemplate = (template, templateFormat, inputVariables) => {\n    if (!(templateFormat in DEFAULT_FORMATTER_MAPPING)) {\n        const validFormats = Object.keys(DEFAULT_FORMATTER_MAPPING);\n        throw new Error(`Invalid template format. Got \\`${templateFormat}\\`;\n                         should be one of ${validFormats}`);\n    }\n    try {\n        const dummyInputs = inputVariables.reduce((acc, v) => {\n            acc[v] = \"foo\";\n            return acc;\n        }, {});\n        if (Array.isArray(template)) {\n            template.forEach((message) => {\n                if (message.type === \"text\") {\n                    renderTemplate(message.text, templateFormat, dummyInputs);\n                }\n                else if (message.type === \"image_url\") {\n                    if (typeof message.image_url === \"string\") {\n                        renderTemplate(message.image_url, templateFormat, dummyInputs);\n                    }\n                    else {\n                        const imageUrl = message.image_url.url;\n                        renderTemplate(imageUrl, templateFormat, dummyInputs);\n                    }\n                }\n                else {\n                    throw new Error(`Invalid message template received. ${JSON.stringify(message, null, 2)}`);\n                }\n            });\n        }\n        else {\n            renderTemplate(template, templateFormat, dummyInputs);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    }\n    catch (e) {\n        throw new Error(`Invalid prompt schema: ${e.message}`);\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}