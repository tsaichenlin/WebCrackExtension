{"ast":null,"code":"import { OpenAI as OpenAIClient } from \"openai\";\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { Embeddings } from \"@langchain/core/embeddings\";\nimport { chunkArray } from \"@langchain/core/utils/chunk_array\";\nimport { getEndpoint } from \"./utils/azure.js\";\nimport { wrapOpenAIClientError } from \"./utils/openai.js\";\n/**\n * Class for generating embeddings using the OpenAI API. Extends the\n * Embeddings class and implements OpenAIEmbeddingsParams and\n * AzureOpenAIInput.\n * @example\n * ```typescript\n * // Embed a query using OpenAIEmbeddings to generate embeddings for a given text\n * const model = new OpenAIEmbeddings();\n * const res = await model.embedQuery(\n *   \"What would be a good company name for a company that makes colorful socks?\",\n * );\n * console.log({ res });\n *\n * ```\n */\nexport class OpenAIEmbeddings extends Embeddings {\n  constructor(fields, configuration) {\n    var _fieldsWithDefaults$o, _fieldsWithDefaults$a, _fieldsWithDefaults$a2, _ref, _fieldsWithDefaults$a3, _fieldsWithDefaults$a4, _fieldsWithDefaults$c, _fieldsWithDefaults$c2, _fieldsWithDefaults$m, _fieldsWithDefaults$b, _fieldsWithDefaults$s, _configuration$baseOp, _configuration$baseOp2;\n    const fieldsWithDefaults = {\n      maxConcurrency: 2,\n      ...fields\n    };\n    super(fieldsWithDefaults);\n    Object.defineProperty(this, \"modelName\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: \"text-embedding-ada-002\"\n    });\n    Object.defineProperty(this, \"batchSize\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 512\n    });\n    // TODO: Update to `false` on next minor release (see: https://github.com/langchain-ai/langchainjs/pull/3612)\n    Object.defineProperty(this, \"stripNewLines\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    /**\n     * The number of dimensions the resulting output embeddings should have.\n     * Only supported in `text-embedding-3` and later models.\n     */\n    Object.defineProperty(this, \"dimensions\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"timeout\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"azureOpenAIApiKey\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"azureOpenAIBasePath\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"organization\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"client\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"clientConfig\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    let apiKey = (_fieldsWithDefaults$o = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.openAIApiKey) !== null && _fieldsWithDefaults$o !== void 0 ? _fieldsWithDefaults$o : getEnvironmentVariable(\"OPENAI_API_KEY\");\n    const azureApiKey = (_fieldsWithDefaults$a = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.azureOpenAIApiKey) !== null && _fieldsWithDefaults$a !== void 0 ? _fieldsWithDefaults$a : getEnvironmentVariable(\"AZURE_OPENAI_API_KEY\");\n    if (!azureApiKey && !apiKey) {\n      throw new Error(\"OpenAI or Azure OpenAI API key not found\");\n    }\n    const azureApiInstanceName = (_fieldsWithDefaults$a2 = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.azureOpenAIApiInstanceName) !== null && _fieldsWithDefaults$a2 !== void 0 ? _fieldsWithDefaults$a2 : getEnvironmentVariable(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n    const azureApiDeploymentName = (_ref = (fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.azureOpenAIApiEmbeddingsDeploymentName) || (fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.azureOpenAIApiDeploymentName)) !== null && _ref !== void 0 ? _ref : getEnvironmentVariable(\"AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME\") || getEnvironmentVariable(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\");\n    const azureApiVersion = (_fieldsWithDefaults$a3 = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.azureOpenAIApiVersion) !== null && _fieldsWithDefaults$a3 !== void 0 ? _fieldsWithDefaults$a3 : getEnvironmentVariable(\"AZURE_OPENAI_API_VERSION\");\n    this.azureOpenAIBasePath = (_fieldsWithDefaults$a4 = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.azureOpenAIBasePath) !== null && _fieldsWithDefaults$a4 !== void 0 ? _fieldsWithDefaults$a4 : getEnvironmentVariable(\"AZURE_OPENAI_BASE_PATH\");\n    this.organization = (_fieldsWithDefaults$c = fieldsWithDefaults === null || fieldsWithDefaults === void 0 || (_fieldsWithDefaults$c2 = fieldsWithDefaults.configuration) === null || _fieldsWithDefaults$c2 === void 0 ? void 0 : _fieldsWithDefaults$c2.organization) !== null && _fieldsWithDefaults$c !== void 0 ? _fieldsWithDefaults$c : getEnvironmentVariable(\"OPENAI_ORGANIZATION\");\n    this.modelName = (_fieldsWithDefaults$m = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.modelName) !== null && _fieldsWithDefaults$m !== void 0 ? _fieldsWithDefaults$m : this.modelName;\n    this.batchSize = (_fieldsWithDefaults$b = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.batchSize) !== null && _fieldsWithDefaults$b !== void 0 ? _fieldsWithDefaults$b : azureApiKey ? 1 : this.batchSize;\n    this.stripNewLines = (_fieldsWithDefaults$s = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.stripNewLines) !== null && _fieldsWithDefaults$s !== void 0 ? _fieldsWithDefaults$s : this.stripNewLines;\n    this.timeout = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.timeout;\n    this.dimensions = fieldsWithDefaults === null || fieldsWithDefaults === void 0 ? void 0 : fieldsWithDefaults.dimensions;\n    this.azureOpenAIApiVersion = azureApiVersion;\n    this.azureOpenAIApiKey = azureApiKey;\n    this.azureOpenAIApiInstanceName = azureApiInstanceName;\n    this.azureOpenAIApiDeploymentName = azureApiDeploymentName;\n    if (this.azureOpenAIApiKey) {\n      var _apiKey;\n      if (!this.azureOpenAIApiInstanceName && !this.azureOpenAIBasePath) {\n        throw new Error(\"Azure OpenAI API instance name not found\");\n      }\n      if (!this.azureOpenAIApiDeploymentName) {\n        throw new Error(\"Azure OpenAI API deployment name not found\");\n      }\n      if (!this.azureOpenAIApiVersion) {\n        throw new Error(\"Azure OpenAI API version not found\");\n      }\n      apiKey = (_apiKey = apiKey) !== null && _apiKey !== void 0 ? _apiKey : \"\";\n    }\n    this.clientConfig = {\n      apiKey,\n      organization: this.organization,\n      baseURL: configuration === null || configuration === void 0 ? void 0 : configuration.basePath,\n      dangerouslyAllowBrowser: true,\n      defaultHeaders: configuration === null || configuration === void 0 || (_configuration$baseOp = configuration.baseOptions) === null || _configuration$baseOp === void 0 ? void 0 : _configuration$baseOp.headers,\n      defaultQuery: configuration === null || configuration === void 0 || (_configuration$baseOp2 = configuration.baseOptions) === null || _configuration$baseOp2 === void 0 ? void 0 : _configuration$baseOp2.params,\n      ...configuration,\n      ...(fields === null || fields === void 0 ? void 0 : fields.configuration)\n    };\n  }\n  /**\n   * Method to generate embeddings for an array of documents. Splits the\n   * documents into batches and makes requests to the OpenAI API to generate\n   * embeddings.\n   * @param texts Array of documents to generate embeddings for.\n   * @returns Promise that resolves to a 2D array of embeddings for each document.\n   */\n  async embedDocuments(texts) {\n    const batches = chunkArray(this.stripNewLines ? texts.map(t => t.replace(/\\n/g, \" \")) : texts, this.batchSize);\n    const batchRequests = batches.map(batch => {\n      const params = {\n        model: this.modelName,\n        input: batch\n      };\n      if (this.dimensions) {\n        params.dimensions = this.dimensions;\n      }\n      return this.embeddingWithRetry(params);\n    });\n    const batchResponses = await Promise.all(batchRequests);\n    const embeddings = [];\n    for (let i = 0; i < batchResponses.length; i += 1) {\n      const batch = batches[i];\n      const {\n        data: batchResponse\n      } = batchResponses[i];\n      for (let j = 0; j < batch.length; j += 1) {\n        embeddings.push(batchResponse[j].embedding);\n      }\n    }\n    return embeddings;\n  }\n  /**\n   * Method to generate an embedding for a single document. Calls the\n   * embeddingWithRetry method with the document as the input.\n   * @param text Document to generate an embedding for.\n   * @returns Promise that resolves to an embedding for the document.\n   */\n  async embedQuery(text) {\n    const params = {\n      model: this.modelName,\n      input: this.stripNewLines ? text.replace(/\\n/g, \" \") : text\n    };\n    if (this.dimensions) {\n      params.dimensions = this.dimensions;\n    }\n    const {\n      data\n    } = await this.embeddingWithRetry(params);\n    return data[0].embedding;\n  }\n  /**\n   * Private method to make a request to the OpenAI API to generate\n   * embeddings. Handles the retry logic and returns the response from the\n   * API.\n   * @param request Request to send to the OpenAI API.\n   * @returns Promise that resolves to the response from the API.\n   */\n  async embeddingWithRetry(request) {\n    if (!this.client) {\n      const openAIEndpointConfig = {\n        azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n        azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n        azureOpenAIApiKey: this.azureOpenAIApiKey,\n        azureOpenAIBasePath: this.azureOpenAIBasePath,\n        baseURL: this.clientConfig.baseURL\n      };\n      const endpoint = getEndpoint(openAIEndpointConfig);\n      const params = {\n        ...this.clientConfig,\n        baseURL: endpoint,\n        timeout: this.timeout,\n        maxRetries: 0\n      };\n      if (!params.baseURL) {\n        delete params.baseURL;\n      }\n      this.client = new OpenAIClient(params);\n    }\n    const requestOptions = {};\n    if (this.azureOpenAIApiKey) {\n      requestOptions.headers = {\n        \"api-key\": this.azureOpenAIApiKey,\n        ...requestOptions.headers\n      };\n      requestOptions.query = {\n        \"api-version\": this.azureOpenAIApiVersion,\n        ...requestOptions.query\n      };\n    }\n    return this.caller.call(async () => {\n      try {\n        const res = await this.client.embeddings.create(request, requestOptions);\n        return res;\n      } catch (e) {\n        const error = wrapOpenAIClientError(e);\n        throw error;\n      }\n    });\n  }\n}","map":{"version":3,"names":["OpenAI","OpenAIClient","getEnvironmentVariable","Embeddings","chunkArray","getEndpoint","wrapOpenAIClientError","OpenAIEmbeddings","constructor","fields","configuration","_fieldsWithDefaults$o","_fieldsWithDefaults$a","_fieldsWithDefaults$a2","_ref","_fieldsWithDefaults$a3","_fieldsWithDefaults$a4","_fieldsWithDefaults$c","_fieldsWithDefaults$c2","_fieldsWithDefaults$m","_fieldsWithDefaults$b","_fieldsWithDefaults$s","_configuration$baseOp","_configuration$baseOp2","fieldsWithDefaults","maxConcurrency","Object","defineProperty","enumerable","configurable","writable","value","apiKey","openAIApiKey","azureApiKey","azureOpenAIApiKey","Error","azureApiInstanceName","azureOpenAIApiInstanceName","azureApiDeploymentName","azureOpenAIApiEmbeddingsDeploymentName","azureOpenAIApiDeploymentName","azureApiVersion","azureOpenAIApiVersion","azureOpenAIBasePath","organization","modelName","batchSize","stripNewLines","timeout","dimensions","_apiKey","clientConfig","baseURL","basePath","dangerouslyAllowBrowser","defaultHeaders","baseOptions","headers","defaultQuery","params","embedDocuments","texts","batches","map","t","replace","batchRequests","batch","model","input","embeddingWithRetry","batchResponses","Promise","all","embeddings","i","length","data","batchResponse","j","push","embedding","embedQuery","text","request","client","openAIEndpointConfig","endpoint","maxRetries","requestOptions","query","caller","call","res","create","e","error"],"sources":["/Users/mandylin/Desktop/WebCrack React 2/webcrack/node_modules/@langchain/openai/dist/embeddings.js"],"sourcesContent":["import { OpenAI as OpenAIClient } from \"openai\";\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { Embeddings } from \"@langchain/core/embeddings\";\nimport { chunkArray } from \"@langchain/core/utils/chunk_array\";\nimport { getEndpoint } from \"./utils/azure.js\";\nimport { wrapOpenAIClientError } from \"./utils/openai.js\";\n/**\n * Class for generating embeddings using the OpenAI API. Extends the\n * Embeddings class and implements OpenAIEmbeddingsParams and\n * AzureOpenAIInput.\n * @example\n * ```typescript\n * // Embed a query using OpenAIEmbeddings to generate embeddings for a given text\n * const model = new OpenAIEmbeddings();\n * const res = await model.embedQuery(\n *   \"What would be a good company name for a company that makes colorful socks?\",\n * );\n * console.log({ res });\n *\n * ```\n */\nexport class OpenAIEmbeddings extends Embeddings {\n    constructor(fields, configuration) {\n        const fieldsWithDefaults = { maxConcurrency: 2, ...fields };\n        super(fieldsWithDefaults);\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"text-embedding-ada-002\"\n        });\n        Object.defineProperty(this, \"batchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 512\n        });\n        // TODO: Update to `false` on next minor release (see: https://github.com/langchain-ai/langchainjs/pull/3612)\n        Object.defineProperty(this, \"stripNewLines\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /**\n         * The number of dimensions the resulting output embeddings should have.\n         * Only supported in `text-embedding-3` and later models.\n         */\n        Object.defineProperty(this, \"dimensions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        let apiKey = fieldsWithDefaults?.openAIApiKey ??\n            getEnvironmentVariable(\"OPENAI_API_KEY\");\n        const azureApiKey = fieldsWithDefaults?.azureOpenAIApiKey ??\n            getEnvironmentVariable(\"AZURE_OPENAI_API_KEY\");\n        if (!azureApiKey && !apiKey) {\n            throw new Error(\"OpenAI or Azure OpenAI API key not found\");\n        }\n        const azureApiInstanceName = fieldsWithDefaults?.azureOpenAIApiInstanceName ??\n            getEnvironmentVariable(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        const azureApiDeploymentName = (fieldsWithDefaults?.azureOpenAIApiEmbeddingsDeploymentName ||\n            fieldsWithDefaults?.azureOpenAIApiDeploymentName) ??\n            (getEnvironmentVariable(\"AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME\") ||\n                getEnvironmentVariable(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\"));\n        const azureApiVersion = fieldsWithDefaults?.azureOpenAIApiVersion ??\n            getEnvironmentVariable(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath =\n            fieldsWithDefaults?.azureOpenAIBasePath ??\n                getEnvironmentVariable(\"AZURE_OPENAI_BASE_PATH\");\n        this.organization =\n            fieldsWithDefaults?.configuration?.organization ??\n                getEnvironmentVariable(\"OPENAI_ORGANIZATION\");\n        this.modelName = fieldsWithDefaults?.modelName ?? this.modelName;\n        this.batchSize =\n            fieldsWithDefaults?.batchSize ?? (azureApiKey ? 1 : this.batchSize);\n        this.stripNewLines =\n            fieldsWithDefaults?.stripNewLines ?? this.stripNewLines;\n        this.timeout = fieldsWithDefaults?.timeout;\n        this.dimensions = fieldsWithDefaults?.dimensions;\n        this.azureOpenAIApiVersion = azureApiVersion;\n        this.azureOpenAIApiKey = azureApiKey;\n        this.azureOpenAIApiInstanceName = azureApiInstanceName;\n        this.azureOpenAIApiDeploymentName = azureApiDeploymentName;\n        if (this.azureOpenAIApiKey) {\n            if (!this.azureOpenAIApiInstanceName && !this.azureOpenAIBasePath) {\n                throw new Error(\"Azure OpenAI API instance name not found\");\n            }\n            if (!this.azureOpenAIApiDeploymentName) {\n                throw new Error(\"Azure OpenAI API deployment name not found\");\n            }\n            if (!this.azureOpenAIApiVersion) {\n                throw new Error(\"Azure OpenAI API version not found\");\n            }\n            apiKey = apiKey ?? \"\";\n        }\n        this.clientConfig = {\n            apiKey,\n            organization: this.organization,\n            baseURL: configuration?.basePath,\n            dangerouslyAllowBrowser: true,\n            defaultHeaders: configuration?.baseOptions?.headers,\n            defaultQuery: configuration?.baseOptions?.params,\n            ...configuration,\n            ...fields?.configuration,\n        };\n    }\n    /**\n     * Method to generate embeddings for an array of documents. Splits the\n     * documents into batches and makes requests to the OpenAI API to generate\n     * embeddings.\n     * @param texts Array of documents to generate embeddings for.\n     * @returns Promise that resolves to a 2D array of embeddings for each document.\n     */\n    async embedDocuments(texts) {\n        const batches = chunkArray(this.stripNewLines ? texts.map((t) => t.replace(/\\n/g, \" \")) : texts, this.batchSize);\n        const batchRequests = batches.map((batch) => {\n            const params = {\n                model: this.modelName,\n                input: batch,\n            };\n            if (this.dimensions) {\n                params.dimensions = this.dimensions;\n            }\n            return this.embeddingWithRetry(params);\n        });\n        const batchResponses = await Promise.all(batchRequests);\n        const embeddings = [];\n        for (let i = 0; i < batchResponses.length; i += 1) {\n            const batch = batches[i];\n            const { data: batchResponse } = batchResponses[i];\n            for (let j = 0; j < batch.length; j += 1) {\n                embeddings.push(batchResponse[j].embedding);\n            }\n        }\n        return embeddings;\n    }\n    /**\n     * Method to generate an embedding for a single document. Calls the\n     * embeddingWithRetry method with the document as the input.\n     * @param text Document to generate an embedding for.\n     * @returns Promise that resolves to an embedding for the document.\n     */\n    async embedQuery(text) {\n        const params = {\n            model: this.modelName,\n            input: this.stripNewLines ? text.replace(/\\n/g, \" \") : text,\n        };\n        if (this.dimensions) {\n            params.dimensions = this.dimensions;\n        }\n        const { data } = await this.embeddingWithRetry(params);\n        return data[0].embedding;\n    }\n    /**\n     * Private method to make a request to the OpenAI API to generate\n     * embeddings. Handles the retry logic and returns the response from the\n     * API.\n     * @param request Request to send to the OpenAI API.\n     * @returns Promise that resolves to the response from the API.\n     */\n    async embeddingWithRetry(request) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                baseURL: this.clientConfig.baseURL,\n            };\n            const endpoint = getEndpoint(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0,\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new OpenAIClient(params);\n        }\n        const requestOptions = {};\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers,\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query,\n            };\n        }\n        return this.caller.call(async () => {\n            try {\n                const res = await this.client.embeddings.create(request, requestOptions);\n                return res;\n            }\n            catch (e) {\n                const error = wrapOpenAIClientError(e);\n                throw error;\n            }\n        });\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}