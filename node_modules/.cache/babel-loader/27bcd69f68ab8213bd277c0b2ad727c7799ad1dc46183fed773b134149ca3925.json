{"ast":null,"code":"import { ImagePromptValue } from \"../prompt_values.js\";\nimport { BasePromptTemplate } from \"./base.js\";\nimport { checkValidTemplate } from \"./template.js\";\n/**\n * An image prompt template for a multimodal model.\n */\nexport class ImagePromptTemplate extends BasePromptTemplate {\n  static lc_name() {\n    return \"ImagePromptTemplate\";\n  }\n  constructor(input) {\n    var _input$templateFormat, _input$validateTempla;\n    super(input);\n    Object.defineProperty(this, \"lc_namespace\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"langchain_core\", \"prompts\", \"image\"]\n    });\n    Object.defineProperty(this, \"template\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"templateFormat\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: \"f-string\"\n    });\n    Object.defineProperty(this, \"validateTemplate\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    this.template = input.template;\n    this.templateFormat = (_input$templateFormat = input.templateFormat) !== null && _input$templateFormat !== void 0 ? _input$templateFormat : this.templateFormat;\n    this.validateTemplate = (_input$validateTempla = input.validateTemplate) !== null && _input$validateTempla !== void 0 ? _input$validateTempla : this.validateTemplate;\n    if (this.validateTemplate) {\n      let totalInputVariables = this.inputVariables;\n      if (this.partialVariables) {\n        totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n      }\n      checkValidTemplate([{\n        type: \"image_url\",\n        image_url: this.template\n      }], this.templateFormat, totalInputVariables);\n    }\n  }\n  _getPromptType() {\n    return \"prompt\";\n  }\n  /**\n   * Partially applies values to the prompt template.\n   * @param values The values to be partially applied to the prompt template.\n   * @returns A new instance of ImagePromptTemplate with the partially applied values.\n   */\n  async partial(values) {\n    var _this$partialVariable;\n    const newInputVariables = this.inputVariables.filter(iv => !(iv in values));\n    const newPartialVariables = {\n      ...((_this$partialVariable = this.partialVariables) !== null && _this$partialVariable !== void 0 ? _this$partialVariable : {}),\n      ...values\n    };\n    const promptDict = {\n      ...this,\n      inputVariables: newInputVariables,\n      partialVariables: newPartialVariables\n    };\n    return new ImagePromptTemplate(promptDict);\n  }\n  /**\n   * Formats the prompt template with the provided values.\n   * @param values The values to be used to format the prompt template.\n   * @returns A promise that resolves to a string which is the formatted prompt.\n   */\n  async format(values) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const formatted = {};\n    for (const [key, value] of Object.entries(this.template)) {\n      if (typeof value === \"string\") {\n        formatted[key] = value.replace(/{([^{}]*)}/g, (match, group) => {\n          const replacement = values[group];\n          return typeof replacement === \"string\" || typeof replacement === \"number\" ? String(replacement) : match;\n        });\n      } else {\n        formatted[key] = value;\n      }\n    }\n    const url = values.url || formatted.url;\n    const detail = values.detail || formatted.detail;\n    if (!url) {\n      throw new Error(\"Must provide either an image URL.\");\n    }\n    if (typeof url !== \"string\") {\n      throw new Error(\"url must be a string.\");\n    }\n    const output = {\n      url\n    };\n    if (detail) {\n      output.detail = detail;\n    }\n    return output;\n  }\n  /**\n   * Formats the prompt given the input values and returns a formatted\n   * prompt value.\n   * @param values The input values to format the prompt.\n   * @returns A Promise that resolves to a formatted prompt value.\n   */\n  async formatPromptValue(values) {\n    const formattedPrompt = await this.format(values);\n    return new ImagePromptValue(formattedPrompt);\n  }\n}","map":{"version":3,"names":["ImagePromptValue","BasePromptTemplate","checkValidTemplate","ImagePromptTemplate","lc_name","constructor","input","_input$templateFormat","_input$validateTempla","Object","defineProperty","enumerable","configurable","writable","value","template","templateFormat","validateTemplate","totalInputVariables","inputVariables","partialVariables","concat","keys","type","image_url","_getPromptType","partial","values","_this$partialVariable","newInputVariables","filter","iv","newPartialVariables","promptDict","format","formatted","key","entries","replace","match","group","replacement","String","url","detail","Error","output","formatPromptValue","formattedPrompt"],"sources":["/Users/mandylin/Desktop/WebCrack React/webcrack/node_modules/@langchain/core/dist/prompts/image.js"],"sourcesContent":["import { ImagePromptValue } from \"../prompt_values.js\";\nimport { BasePromptTemplate, } from \"./base.js\";\nimport { checkValidTemplate } from \"./template.js\";\n/**\n * An image prompt template for a multimodal model.\n */\nexport class ImagePromptTemplate extends BasePromptTemplate {\n    static lc_name() {\n        return \"ImagePromptTemplate\";\n    }\n    constructor(input) {\n        super(input);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"prompts\", \"image\"]\n        });\n        Object.defineProperty(this, \"template\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.template = input.template;\n        this.templateFormat = input.templateFormat ?? this.templateFormat;\n        this.validateTemplate = input.validateTemplate ?? this.validateTemplate;\n        if (this.validateTemplate) {\n            let totalInputVariables = this.inputVariables;\n            if (this.partialVariables) {\n                totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n            }\n            checkValidTemplate([\n                { type: \"image_url\", image_url: this.template },\n            ], this.templateFormat, totalInputVariables);\n        }\n    }\n    _getPromptType() {\n        return \"prompt\";\n    }\n    /**\n     * Partially applies values to the prompt template.\n     * @param values The values to be partially applied to the prompt template.\n     * @returns A new instance of ImagePromptTemplate with the partially applied values.\n     */\n    async partial(values) {\n        const newInputVariables = this.inputVariables.filter((iv) => !(iv in values));\n        const newPartialVariables = {\n            ...(this.partialVariables ?? {}),\n            ...values,\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables,\n        };\n        return new ImagePromptTemplate(promptDict);\n    }\n    /**\n     * Formats the prompt template with the provided values.\n     * @param values The values to be used to format the prompt template.\n     * @returns A promise that resolves to a string which is the formatted prompt.\n     */\n    async format(values) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const formatted = {};\n        for (const [key, value] of Object.entries(this.template)) {\n            if (typeof value === \"string\") {\n                formatted[key] = value.replace(/{([^{}]*)}/g, (match, group) => {\n                    const replacement = values[group];\n                    return typeof replacement === \"string\" ||\n                        typeof replacement === \"number\"\n                        ? String(replacement)\n                        : match;\n                });\n            }\n            else {\n                formatted[key] = value;\n            }\n        }\n        const url = values.url || formatted.url;\n        const detail = values.detail || formatted.detail;\n        if (!url) {\n            throw new Error(\"Must provide either an image URL.\");\n        }\n        if (typeof url !== \"string\") {\n            throw new Error(\"url must be a string.\");\n        }\n        const output = { url };\n        if (detail) {\n            output.detail = detail;\n        }\n        return output;\n    }\n    /**\n     * Formats the prompt given the input values and returns a formatted\n     * prompt value.\n     * @param values The input values to format the prompt.\n     * @returns A Promise that resolves to a formatted prompt value.\n     */\n    async formatPromptValue(values) {\n        const formattedPrompt = await this.format(values);\n        return new ImagePromptValue(formattedPrompt);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}